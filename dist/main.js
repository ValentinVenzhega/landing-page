(()=>{"use strict";(e=>{let t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function l(e){return e>=0&&e<10?`0${e}`:e}let r=setInterval((function(){let e=function(){let e=(new Date("23 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}}();e.timeRemaining>0?(t.textContent=l(e.hours),n.textContent=l(e.minutes),o.textContent=l(e.seconds)):e.timeRemaining<=0&&(clearInterval(r),t.textContent="00",n.textContent="00",o.textContent="00")}),1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelectorAll(".form-btn")[0],n=()=>{e.classList.toggle("active-menu")};window.addEventListener("click",(o=>{const l=o.target;l.closest(".menu")?(n(),t.disabled=!0):l.classList.contains("close-btn")||l.closest("menu>ul")?(n(),t.disabled=!1):l.closest("menu")||(e.classList.remove("active-menu"),t.disabled=!1)}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content"),o=document.querySelector("#form3");t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block";let t=Date.now(),o=setInterval((function(){let e=Date.now()-t;n.style.left=e/5+"%",e>200&&clearInterval(o),window.innerWidth<768&&(clearInterval(o),n.style.left="")}))}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?(e.style.display="none",o.reset()):(n=n.closest(".popup-content"),n||(e.style.display="none",o.reset()))}))})(),(()=>{const e=e=>{e.preventDefault();let t=e.currentTarget.getAttribute("href"),n=document.querySelector(t).getBoundingClientRect().top+window.pageYOffset,o=setInterval((()=>{let e=n/20;e>window.pageYOffset-n&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,n),clearInterval(o))}),15)},t=document.querySelectorAll("ul>li>a"),n=document.querySelector("main>a");t.forEach((t=>{t.addEventListener("click",e)})),n.addEventListener("click",e)})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,l)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(l)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),n=document.querySelector(".portfolio-dots");let o,l=0;const r=(e,t,n)=>{e[t].classList.remove(n)},s=(e,t,n)=>{e[t].classList.add(n)};for(let t=0;t<e.length;t++){const e=document.createElement("li");e.className="dot",n.append(e)}let a=document.querySelectorAll(".dot");const c=()=>{r(e,l,"portfolio-item-active"),r(a,l,"dot-active"),l++,l>=e.length&&(l=0),s(e,l,"portfolio-item-active"),s(a,l,"dot-active")},i=(e=3e3)=>{o=setInterval(c,e)};t.addEventListener("click",(t=>{t.preventDefault();const n=t.target;n.matches(".portfolio-btn, .dot")&&(r(e,l,"portfolio-item-active"),r(a,l,"dot-active"),n.matches("#arrow-right")?l++:n.matches("#arrow-left")?l--:n.matches(".dot")&&a.forEach(((e,t)=>{e===n&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),s(e,l,"portfolio-item-active"),s(a,l,"dot-active"))})),t.addEventListener("mouseover",(e=>{e.target.closest(".portfolio-content")&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{e.target.closest(".portfolio-content")&&i()})),i(1500)})(),document.querySelectorAll(".command__photo").forEach((e=>{const t=e.src;e.addEventListener("mouseenter",(e=>{const t=e.target;t.src=t.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=t}))})),(()=>{const e=document.querySelectorAll("form"),t=document.querySelector(".calc-block").querySelectorAll("input"),n=(document.querySelectorAll(".form-btn")[0],document.querySelectorAll('input[name="user_email"]')),o=/^[А-Яа-я ]{2,20}$/,l=/^[a-zA-Z0-9-._~*'!]+@[a-z]+\.[a-z]{2,3}$/,r=/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/,s=/[А-Яа-я0-9%-:;@"?()!,. ]{3,250}/;n.forEach((e=>e.required=!0)),t.forEach((e=>{e.addEventListener("input",(()=>e.value=e.value.replace(/\D/,"")))}));const a=e=>{e.value=e.value.replace(/-{2,}/g,"-"),e.value=e.value.replace(/\s{2,}/g," "),e.value=e.value.replace(/^[ \s]+|[ \s]+$/,""),e.value=e.value.replace(/^[/-]+|[/-]+$/,"")},c=e=>{"user_name"===e.name&&""!==e.value&&(o.test(e.value)?((e=>{let t=e.value.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].slice(0,1).toUpperCase()+t[e].slice(1).toLowerCase();let n=t.join(" ");e.value=n})(e),a(e),e.style.border="3px solid green"):(e.style.border="3px solid red",e.value="")),"user_email"===e.name&&""!==e.value&&(l.test(e.value)?(a(e),e.style.border="3px solid green"):(e.style.border="3px solid red",e.value="")),"user_phone"===e.name&&""!==e.value&&(r.test(e.value)?(a(e),e.style.border="3px solid green"):(e.style.border="3px solid red",e.value="")),"user_message"===e.name&&""!==e.value&&(s.test(e.value)?(a(e),e.style.border="3px solid green"):(e.style.border="3px solid red",e.value=""))};e.forEach((e=>{for(let t of e.elements)"BUTTON"!==t.tagName&&t.addEventListener("blur",(()=>{c(t)}));e.addEventListener("submit",(t=>{t.preventDefault();for(let t of e.elements)"BUTTON"!==t.tagName&&""!==t.value&&(t.style.border="none")}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),l=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),s=document.getElementById("total");t.addEventListener("change",(t=>{const a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,c=1;const i=n.options[n.selectedIndex].value,d=+o.value;r.value>1&&(a+=(r.value-1)/10),l.value&&l.value<5?c*=2:l.value&&l.value<10&&(c*=1.5),i&&d&&(t=e*i*d*a*c),((e,t)=>{let n=0;const o=10*e/100,l=setInterval((()=>{n+=o,n>=e&&clearInterval(l),t.innerHTML=Math.floor(n)}),50)})(t,s)})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div"),n=document.querySelector(".popup");t.classList.add("status-message"),e.forEach((e=>{e.addEventListener("submit",(l=>{if(l.preventDefault(),e.appendChild(t),t.innerHTML='\n            <div class="mask">\n               <div class="loader"></div>\n            </div>\n         ',!document.querySelector("#my-style")){const e=document.createElement("style");e.setAttribute("id","my-style"),e.textContent="\n               .status-message {\n                  font-size: 2rem;\n                  color: #ffffff;\n               }\n               .mask {\n                  z-index: 100;\n                  transition: 0.6s;\n                  display: flex;\n                  justify-content: center;\n                  align-items: center;\n               }\n               .loader {\n                  width: 75px;\n                  height: 75px;\n                  border: 10px solid #19b5fe;\n                  border-radius: 50%;\n                  border-left-color: #1b6e7a;\n                  animation: loader 1.3s linear infinite;\n               }\n               @keyframes loader {\n                  100% {\n                     transform: rotate(360deg);\n                  }\n               }\n            ",document.head.appendChild(e)}const r=new FormData(e);let s={};r.forEach(((e,t)=>{s[t]=e})),o(s).then((e=>{if(200!==e.status)throw new Error("status networking not 200");t.textContent="Спасибо! Мы скоро с вами свяжемся",setTimeout((()=>{t.textContent="",n.style.display="none"}),2e3)})).catch((e=>{t.textContent="Что-то пошло не так",setTimeout((()=>{t.textContent="",n.style.display="none"}),2e3)})),e.reset()}))}));const o=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})()})();